---
title: Using R Markdown for recurring Reports
author: Heike
date: '2018-11-05'
slug: using-r-markdown-for-recurring-reports
categories: []
tags: ["R","R Markdown", "Reporting","Analytics"]
---

<script src="/./rmarkdown-libs/kePrint/kePrint.js"></script>


<p>In this post I will show you some of my best practises for using R Markdown for reporting. We will cover</p>
<ol style="list-style-type: decimal">
<li><p>How to create beautiful tables with conditional formating with kableExtra</p></li>
<li><p>How to include your results in the (Markdown) text</p></li>
<li><p>How to include global variables.</p></li>
</ol>
<div id="create-beautiful-tables-with-kableextra" class="section level1">
<h1>Create beautiful tables with kableExtra</h1>
<p><code>kableExtra</code> is a nice library that allows you to format and style your tables. It workds similar to <code>ggplot2</code>: You create a base table and then add formating layers with the pipe operator <code>%&gt;%</code>.</p>
<pre class="r"><code>```{r myTable}
library(kableExtra)
head(iris) %&gt;%
  kable() %&gt;%
  kable_styling()
```</code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
Sepal.Length
</th>
<th style="text-align:right;">
Sepal.Width
</th>
<th style="text-align:right;">
Petal.Length
</th>
<th style="text-align:right;">
Petal.Width
</th>
<th style="text-align:left;">
Species
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
5.1
</td>
<td style="text-align:right;">
3.5
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.1
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
3.6
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
5.4
</td>
<td style="text-align:right;">
3.9
</td>
<td style="text-align:right;">
1.7
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
</tbody>
</table>
<p>By default, tables take 100 % of the page width. For tables with few columns, this looks weird. You create less wide tables by setting <code>full_width = FALSE</code></p>
<pre class="r"><code>```{r myTable}
library(kableExtra)
head(iris[1:2]) %&gt;%
  kable() %&gt;%
  kable_styling(full_width = FALSE)
```</code></pre>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
Sepal.Length
</th>
<th style="text-align:right;">
Sepal.Width
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
5.1
</td>
<td style="text-align:right;">
3.5
</td>
</tr>
<tr>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
3.0
</td>
</tr>
<tr>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
3.2
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.1
</td>
</tr>
<tr>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:right;">
5.4
</td>
<td style="text-align:right;">
3.9
</td>
</tr>
</tbody>
</table>
<p>You can pass various arguments to <code>kable_styling</code> to influence the Font and the position of the table.</p>
<table style="width:100%;">
<colgroup>
<col width="27%" />
<col width="39%" />
<col width="32%" />
</colgroup>
<thead>
<tr class="header">
<th>Format</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Font</strong></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Font size</td>
<td>change size of font</td>
<td>font_size = 7</td>
</tr>
<tr class="odd">
<td>Font</td>
<td>..</td>
<td>..</td>
</tr>
<tr class="even">
<td><strong>Position</strong></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Position table</td>
<td>Align the table left (“left”), right (“right”), center (“center”)</td>
<td><code>position = &quot;left&quot;</code></td>
</tr>
<tr class="even">
<td>Embed table in text</td>
<td>wrap text around the table</td>
<td><code>position = &quot;float_right&quot;</code></td>
</tr>
</tbody>
</table>
<p>Let’s increase the font size and position the table on the left.</p>
<pre class="r"><code>```{r myTable}
library(kableExtra)
head(iris[1:2]) %&gt;%
  kable() %&gt;%
  kable_styling(font_size = 20, position = &quot;left&quot;, full_width = FALSE)
```</code></pre>
<table class="table" style="font-size: 20px; width: auto !important; ">
<thead>
<tr>
<th style="text-align:right;">
Sepal.Length
</th>
<th style="text-align:right;">
Sepal.Width
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
5.1
</td>
<td style="text-align:right;">
3.5
</td>
</tr>
<tr>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
3.0
</td>
</tr>
<tr>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
3.2
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.1
</td>
</tr>
<tr>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:right;">
5.4
</td>
<td style="text-align:right;">
3.9
</td>
</tr>
</tbody>
</table>
</div>
