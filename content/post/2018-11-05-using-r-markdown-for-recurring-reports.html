---
title: Formatting tables in R Markdown with kableExtra
author: Heike
date: '2018-11-05'
slug: Formatting-tables-in-R-Markdown-with-kableExtra
categories: []
tags: ["R","R Markdown", "Reporting","Analytics", "kableExtra", "Tables","Knitr"]
---

<script src="/./rmarkdown-libs/kePrint/kePrint.js"></script>


<p>In this post, I will show you some of my best practises for formatting tables in R Markdown. We will cover</p>
<ol style="list-style-type: decimal">
<li><p>How to generally format tables (font, size, color… )</p></li>
<li><p>How to create tables with conditional formating (e.g. coloring values &lt; 0 red)</p></li>
</ol>
<div id="the-basics-the-r-package-kableextra" class="section level2">
<h2>The basics: the R package kableExtra</h2>
<p><code>kableExtra</code> is an awesome package that allows you to format and style your tables. It works similar to <code>ggplot2</code>: You create a base table and then add formating layers with the pipe operator <code>%&gt;%</code>.</p>
<pre class="r"><code>```{r myTable}
library(kableExtra)
head(iris) %&gt;%
  kable() %&gt;%
  kable_styling()
```</code></pre>
<p>By default, tables take 100 % of the page width. For tables with few columns, this looks weird. You create less wide tables by setting <code>full_width = FALSE</code></p>
<pre class="r"><code>```{r myTable}
library(kableExtra)
head(iris[1:2]) %&gt;%
  kable() %&gt;%
  kable_styling(full_width = FALSE)
```</code></pre>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
Sepal.Length
</th>
<th style="text-align:right;">
Sepal.Width
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
5.1
</td>
<td style="text-align:right;">
3.5
</td>
</tr>
<tr>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
3.0
</td>
</tr>
<tr>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
3.2
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.1
</td>
</tr>
<tr>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:right;">
5.4
</td>
<td style="text-align:right;">
3.9
</td>
</tr>
</tbody>
</table>
<p>You can pass various arguments to <code>kable_styling</code> to influence the font and the position of the table. E.g. <code>font_size = 7</code> or <code>position = &quot;left&quot;</code>. To wrap text around the table use <code>position = &quot;float_right&quot;</code>.</p>
<p>Let’s increase the font size and position the table on the left.</p>
<pre class="r"><code>library(kableExtra)
head(iris[c(&quot;Species&quot;,&quot;Sepal.Length&quot;)]) %&gt;%
  kable() %&gt;%
  kable_styling(font_size = 20, position = &quot;left&quot;, full_width = FALSE)</code></pre>
<table class="table" style="font-size: 20px; width: auto !important; ">
<thead>
<tr>
<th style="text-align:left;">
Species
</th>
<th style="text-align:right;">
Sepal.Length
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
5.1
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.9
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.7
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
4.6
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
5.0
</td>
</tr>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
5.4
</td>
</tr>
</tbody>
</table>
</div>
<div id="column-and-row-formatting" class="section level2">
<h2>Column and row formatting</h2>
<p>You can format specific rows and columns with <code>column_spec()</code> or <code>row_spec()</code>. The first argument is the index of the rows or columns you want to format. Then you can pass formating arguments such as <code>bold = TRUE</code>, <code>color = &quot;black&quot;</code> or <code>background =&quot;grey&quot;</code>. So let’s make the first column bold, add a right border, color the text black and the background grey.</p>
<pre class="r"><code>library(kableExtra)
head(iris[c(&quot;Species&quot;,&quot;Sepal.Length&quot;)]) %&gt;%
  kable() %&gt;%
  kable_styling(position = &quot;left&quot;, full_width = FALSE) %&gt;%
  column_spec(1, bold = TRUE, border_right = TRUE, color = &quot;black&quot;, background = &quot;lightgrey&quot;)</code></pre>
<table class="table" style="width: auto !important; ">
<thead>
<tr>
<th style="text-align:left;">
Species
</th>
<th style="text-align:right;">
Sepal.Length
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;">
setosa
</td>
<td style="text-align:right;">
5.1
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;">
setosa
</td>
<td style="text-align:right;">
4.9
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;">
setosa
</td>
<td style="text-align:right;">
4.7
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;">
setosa
</td>
<td style="text-align:right;">
4.6
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;">
setosa
</td>
<td style="text-align:right;">
5.0
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;">
setosa
</td>
<td style="text-align:right;">
5.4
</td>
</tr>
</tbody>
</table>
<p>The first and the 6th row have Sepal.Length &gt; 5! We should color the entire row red!</p>
<pre class="r"><code>library(kableExtra)
head(iris[c(&quot;Species&quot;,&quot;Sepal.Length&quot;)])%&gt;%
  kable() %&gt;%
  kable_styling(position = &quot;left&quot;, full_width = FALSE) %&gt;%
  column_spec(1, bold = TRUE, border_right = TRUE, color = &quot;black&quot;, background = &quot;lightgrey&quot;) %&gt;%
  row_spec(c(1,6), background  = &quot;red&quot;)</code></pre>
<table class="table" style="width: auto !important; ">
<thead>
<tr>
<th style="text-align:left;">
Species
</th>
<th style="text-align:right;">
Sepal.Length
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;background-color: red;">
setosa
</td>
<td style="text-align:right;background-color: red;">
5.1
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;">
setosa
</td>
<td style="text-align:right;">
4.9
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;">
setosa
</td>
<td style="text-align:right;">
4.7
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;">
setosa
</td>
<td style="text-align:right;">
4.6
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;">
setosa
</td>
<td style="text-align:right;">
5.0
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;background-color: red;">
setosa
</td>
<td style="text-align:right;background-color: red;">
5.4
</td>
</tr>
</tbody>
</table>
<p>At this point you may be wondering: Can I set colors automatically? Yes, of course you can. This is a pretty common task in reports: For example coloring values &lt; 0 in financial reports red. <code>cell_spec</code> is the function you need. You have to apply <code>cell_spec</code> to a <code>data.frame</code> and not <code>knitr_kable</code> object. First you have to create a new column in your <code>data.frame</code> with <code>cell_spec</code> for example by using the <code>mutate</code> function from the <code>dplyr</code> package. Second, apply <code>kable(escape = FALSE)</code>. The <code>cell_spec</code> function creates pure html code. That’s why you need to pass the additional argument <code>escape = FALSE</code>. Currently, <code>cell_spec</code> supports features including bold, italic, monospace, text color, background color, align, font size and rotation angle.</p>
<p>Here is an example how you could change the color of the text in a cell based on its values:</p>
<pre class="r"><code>head(iris[c(&quot;Species&quot;,&quot;Sepal.Length&quot;)]) %&gt;%
  mutate(
    Sepal.Length = cell_spec(Sepal.Length, color = ifelse(Sepal.Length &gt; 5, &quot;green&quot;,&quot;red&quot;))) %&gt;%
  kable(escape = FALSE) %&gt;%
  kable_styling(position = &quot;left&quot;, full_width = FALSE) %&gt;%
    column_spec(1, bold = TRUE, border_right = TRUE, color = &quot;black&quot;, background = &quot;lightgrey&quot;)</code></pre>
<table class="table" style="width: auto !important; ">
<thead>
<tr>
<th style="text-align:left;">
Species
</th>
<th style="text-align:left;">
Sepal.Length
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;">
setosa
</td>
<td style="text-align:left;">
<span style="     color: green;">5.1</span>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;">
setosa
</td>
<td style="text-align:left;">
<span style="     color: red;">4.9</span>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;">
setosa
</td>
<td style="text-align:left;">
<span style="     color: red;">4.7</span>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;">
setosa
</td>
<td style="text-align:left;">
<span style="     color: red;">4.6</span>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;">
setosa
</td>
<td style="text-align:left;">
<span style="     color: red;">5</span>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black;background-color: lightgrey;border-right:1px solid;">
setosa
</td>
<td style="text-align:left;">
<span style="     color: green;">5.4</span>
</td>
</tr>
</tbody>
</table>
<p>For more formatting tips such as grouping, popover messages and bootstrapping, I’ll refer you to the <a href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html">kableExtra documentation</a></p>
</div>
